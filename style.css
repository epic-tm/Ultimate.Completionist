const artifactsData = [
    { id: 1, name: "Physical", radius: 130 },
    { id: 2, name: "Cognitive", radius: 175 },
    { id: 3, name: "Social", radius: 220 },
    { id: 4, name: "Technical", radius: 265 },
    { id: 5, name: "Creative", radius: 310 },
    { id: 6, name: "Financial", radius: 355 },
    { id: 7, name: "Spiritual", radius: 400 },
];

const viewport = document.getElementById('viewport');
const orbitsSvg = document.getElementById('orbits-svg');
const hoverSfx = document.getElementById('hover-sound');
const artifactsLayer = document.getElementById('artifacts-layer');

function initMap() {
    // Clear previous elements if re-running
    orbitsSvg.innerHTML = '';
    
    artifactsData.forEach((data, index) => {
        // 1. Precise SVG Ring
        const ring = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        ring.setAttribute("cx", "400");
        ring.setAttribute("cy", "400");
        ring.setAttribute("r", data.radius);
        ring.setAttribute("fill", "none");
        ring.setAttribute("stroke", "rgba(255,255,255,0.15)");
        ring.setAttribute("stroke-width", "0.8");
        orbitsSvg.appendChild(ring);

        // 2. Trigonometry for Placement (0 to 360 degrees)
        const angle = (index * (360 / artifactsData.length)) * (Math.PI / 180);
        const x = 400 + data.radius * Math.cos(angle);
        const y = 400 + data.radius * Math.sin(angle);

        const node = document.createElement('div');
        node.className = 'artifact';
        
        // Centering Trick: Use transform translate to ensure the image 
        // center sits exactly on the coordinate.
        node.style.left = `${x}px`;
        node.style.top = `${y}px`;
        node.style.transform = `translate(-50%, -50%)`;

        node.innerHTML = `
            <img src="assets/hover.png" class="hover-bg">
            <img src="assets/World_Penacony.webp" class="artifact-icon" alt="${data.name}">
        `;

        // Interaction
        node.addEventListener('mouseenter', () => {
            if(hoverSfx) {
                hoverSfx.currentTime = 0;
                hoverSfx.play().catch(() => {}); // Catch browser autoplay blocks
            }
        });

        viewport.appendChild(node);
    });
}

// Parallax (Flattened - only subtle X/Y shift, no rotation)
document.addEventListener('mousemove', (e) => {
    const moveX = (window.innerWidth / 2 - e.pageX) / 60;
    const moveY = (window.innerHeight / 2 - e.pageY) / 60;
    
    // Subtly shift the whole map instead of rotating it
    viewport.style.left = `${moveX}px`;
    viewport.style.top = `${moveY}px`;
});

initMap();
/* Add this to your existing CSS */

.artifact-label {
    position: absolute;
    bottom: -20px;
    font-size: 10px;
    letter-spacing: 2px;
    color: rgba(255, 255, 255, 0.5);
    text-transform: uppercase;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.artifact:hover .artifact-label {
    opacity: 1;
    color: white;
    text-shadow: 0 0 10px white;
}

/* Ensure the Zenith stays above rings but below hover effects */
.zenith {
    z-index: 10;
    pointer-events: none;
}
